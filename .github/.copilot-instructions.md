# Copilot Instructions for EsmorgaFlutter

## üèóÔ∏è Architecture

### Cubit Pattern
This project follows the **Cubit** pattern for state management. 

**üìñ Read the complete architecture guide**: [docs/cubit_architecture_guideline.md](../docs/cubit_architecture_guideline.md)

**Key principles:**
- **Methods and States only** - Cubit exposes methods and emits states
- **Separate files** - Cubit and State must be in separate files:
  - `feature_state.dart` - State definitions  
  - `feature_cubit.dart` - Cubit logic
- **No side effects in Cubit** - Navigation, SnackBars, Dialogs handled in UI with `BlocListener`
- **No StreamController** - Do not use additional StreamControllers for "effects"
- **No callbacks in Cubit** - Do not pass callbacks like `onSuccess`, `onError` to Cubit constructor

**Always refer to docs/cubit_architecture_guideline.md for detailed examples and best practices.**

## üìã Android ‚Üí Flutter Migration Rules

When migrating components from Android (Jetpack Compose) to Flutter, **ALWAYS** follow these rules:

### 1. **Enum Naming**
- ‚ùå **Android**: `UPPER_CASE` (e.g.: `BUTTON`, `BODY_1`, `HEADING_1`)
- ‚úÖ **Flutter/Dart**: `lowerCamelCase` (e.g.: `button`, `body1`, `heading1`)
- ‚úÖ **For compound names**: `body1Accent`, `heading2`, etc.

**Example:**
```dart
// ‚ùå WRONG (Android style)
enum EsmorgaTextStyle {
  BUTTON,
  BODY_1,
  BODY_1_ACCENT,
}

// ‚úÖ CORRECT (Dart style)
enum EsmorgaTextStyle {
  button,
  body1,
  body1Accent,
}
```

### 2. **Property and Variable Naming**
- ‚ùå **Android**: `snake_case` (e.g.: `on_click`, `is_enabled`)
- ‚úÖ **Flutter/Dart**: `lowerCamelCase` (e.g.: `onClick`, `isEnabled`, `oneLine`)

### 3. **Constructors**
- ‚úÖ Always use `const` when possible
- ‚úÖ Always include `super.key` as first parameter
- ‚úÖ Use `required` for mandatory parameters
- ‚úÖ Clear and explicit default values

**Example:**
```dart
const EsmorgaButton({
  super.key,
  required this.text,
  this.isLoading = false,
  this.isEnabled = true,
  required this.onClick,
});
```

### 4. **Private Methods**
- ‚úÖ Prefix `_` for internal class methods
- ‚úÖ Names in `lowerCamelCase`

**Example:**
```dart
TextStyle _getTextStyle(BuildContext context, EsmorgaTextStyle style) {
  switch (style) {
    case EsmorgaTextStyle.button:
      return Theme.of(context).textTheme.labelLarge!;
  }
}
```

### 5. **Functionality**
- ‚úÖ **KEEP ALL** parameters from the original Android component
- ‚úÖ **RESPECT** the exact behavior of the Android component
- ‚úÖ **ADAPT ONLY** the code style to Dart/Flutter conventions
- ‚úÖ If Android has a parameter like `oneLine`, Flutter must have it too

### 6. **Imports**
- ‚úÖ Order imports: Flutter first, then external packages, then internal
- ‚úÖ Use relative paths only when necessary

### 7. **Constants**
- ‚úÖ Use `const` for constant values
- ‚úÖ For values like `Int.MAX_VALUE` from Kotlin, use `999999` in Dart

### 8. **Language**
- ‚úÖ **ALL code ALWAYS in ENGLISH** (variable names, functions, classes, etc.)
- ‚úÖ **All documentation ALWAYS in ENGLISH**
- ‚ùå **NEVER** use Spanish in code or documentation
- ‚úÖ Examples: `isLoading`, `onClick`, `getText` (NOT: `estaCargando`, `alHacerClick`)

### 9. **Comments**
- ‚ùå **NEVER EVER put comments in code**
- ‚úÖ Code must be **self-explanatory**
- ‚úÖ Use descriptive variable and function names
- ‚úÖ If code needs comments, refactor to make it clearer
- ‚ùå DO NOT use comments like `// implementation` or `// logic here`

**Example:**
```dart
// ‚ùå WRONG - with comments
TextStyle _getTextStyle(BuildContext context, EsmorgaTextStyle style) {
  // Returns the appropriate style according to type
  switch (style) {
    case EsmorgaTextStyle.button:
      return Theme.of(context).textTheme.labelLarge!; // Style for buttons
  }
}

// ‚úÖ CORRECT - no comments, self-explanatory code
TextStyle _getTextStyle(BuildContext context, EsmorgaTextStyle style) {
  switch (style) {
    case EsmorgaTextStyle.button:
      return Theme.of(context).textTheme.labelLarge!;
    case EsmorgaTextStyle.body1:
      return Theme.of(context).textTheme.bodyMedium!;
  }
}
```

### 11. **Widgets**
- ‚úÖ Prefer `StatelessWidget` when possible
- ‚úÖ Only use `StatefulWidget` when there is mutable state

### 13. **Android ‚Üí Flutter Equivalences**

| Android Compose | Flutter | Notes |
|----------------|---------|-------|
| `Modifier.fillMaxWidth()` | `width: double.infinity` | Use `SizedBox` wrapper |
| `RoundedCornerShape(5.dp)` | `BorderRadius.circular(5.0)` | |
| `Int.MAX_VALUE` | `999999` | For maxLines |
| `isEnabled && !isLoading` | `isEnabled && !isLoading` | Keep logic the same |
| `MaterialTheme.colorScheme` | `Theme.of(context).colorScheme` | |
| `TextOverflow.Ellipsis` | `TextOverflow.ellipsis` | lowerCamelCase in Flutter |

## üéØ Correct Migration Examples

### Enum
```kotlin
// Android
enum class EsmorgaTextStyle {
    TITLE,
    HEADING_1,
    BODY_1_ACCENT
}
```

```dart
// Flutter
enum EsmorgaTextStyle {
  title,
  heading1,
  body1Accent,
}
```

### Component
```kotlin
// Android
@Composable
fun EsmorgaButton(
    text: String,
    modifier: Modifier = Modifier,
    isLoading: Boolean = false,
    isEnabled: Boolean = true,
    primary: Boolean = true,
    oneLine: Boolean = false,
    onClick: () -> Unit
)
```

```dart
// Flutter
class EsmorgaButton extends StatelessWidget {
  final String text;
  final bool isLoading;
  final bool isEnabled;
  final bool primary;
  final bool oneLine;
  final VoidCallback onClick;

  const EsmorgaButton({
    super.key,
    required this.text,
    this.isLoading = false,
    this.isEnabled = true,
    this.primary = true,
    this.oneLine = false,
    required this.onClick,
  });
}
```

## ‚ö†Ô∏è Common Mistakes to Avoid

1. ‚ùå **DO NOT** use `UPPER_CASE` in Dart enums
2. ‚ùå **DO NOT** use `snake_case` in Dart properties
3. ‚ùå **DO NOT** forget `super.key` in constructors
4. ‚ùå **DO NOT** omit `const` when possible
5. ‚ùå **DO NOT** remove functionality that exists in Android
6. ‚ùå **DO NOT** make public methods private without reason (add `_` only if truly private)
7. ‚ùå **DO NOT** add comments in code
8. ‚ùå **DO NOT** use Spanish in code or documentation

## üìù Checklist Before Completing a Migration

- [ ] All Android parameters are present in Flutter
- [ ] Enums use `lowerCamelCase`
- [ ] Properties use `lowerCamelCase`
- [ ] Constructor uses `const` and `super.key`
- [ ] Private methods have `_` prefix
- [ ] Behavior is identical to Android component
- [ ] No compilation errors
- [ ] DS components are properly imported
- [ ] No comments in code
- [ ] All code and documentation in English

---

**Note**: These instructions must **ALWAYS** be followed when working on this project, especially when migrating Design System components from Android to Flutter.
